<!DOCTYPE html>


<html>
    <head>
        <title>Login Form</title>
        <script
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
       
    </head>

    <body>


        <h2>Login Here:)</h2>

        <form action="Login.php" method="post">
            <table>
                <tr>
                    <td>Username:</td>
                    <td>
                        <input type=" text" name ="user_name">
                    </td>
                </tr>

                <tr>
                    <td>Password:</td>
                    <td>
                        <input type="password" name="user_pass">
                    </td>
                </tr>

                <tr>
                    <td>
                        <input type="button" class="btn btn-primary" value="login"
                               onclick="Login();">
                    </td>
                    <td>
                        New User? <a href="Register Form.html">Register</a>
                    </td>
                    

                </tr>

            </table>
        </form>
        <script>
            function validateAndGetFormData() {
            var user_nameVar = $("#user_name").val();
            if (use_namerVar === "") {
                alert("Username Required Value");
                $("#user").focus();
                return "";
            }
            var passwordVar = $("#password").val();
            if (passwordVar === "") {
                alert("Password is Mandatory");
                $("#password").focus();
                return "";
            }
            // A general method to extract any form data and return the cooresponding Json representation.
            function getFormDataInJson($form) {
                var unindexed_array = $form.serializeArray();
                var indexed_array = {};
                $.map(unindexed_array, function (n, i) {
                    indexed_array[n['name']] = n['value'];
                });
                return indexed_array;
            }
            function executeCommand(reqString, dbBaseUrl, apiEndPointUrl) {
            var url = dbBaseUrl + apiEndPointUrl;
            var jsonObj;
            $.post(url, reqString, function (result) {
                jsonObj = JSON.parse(result);
            }).fail(function (result) {
                var dataJsonObj = result.responseText;
                jsonObj = JSON.parse(dataJsonObj);
            });
            return jsonObj;
        }
        
        function Login() {
            var jsonStr = validateAndGetFormData();
            if (jsonStr === "") {
                return;
            }
            var getReqStr = createGETRequest("90936285|-31948850925317231|90945385",
                    jsonStr, "Covid-Management", "Ind-Rel");
            alert(gettReqStr);
            jQuery.ajaxSetup({async: false});
            var resultObj = executeCommand(getReqStr,
                    "http://api.login2explore.com:5577", "/api/irl");
            

            jQuery.ajaxSetup({async: true});
            alert(JSON.stringify(resultObj));
            resetForm();

        }
        </script>



    </body>
</html>
